# C - Approximate Equalization 2 ABC313

問題
https://atcoder.jp/contests/abc313/tasks/abc313_c

## 考え方

- 最初の考えとしては以下の２つの部分問題に分けること。
  - Bをひとつ決め打った時、AをBと一致させるのに必要な最小の操作回数を求める
  - 最大値と最小値の差が1以下であるようなBのうち、上記で求めた操作回数が最小になるもの

### AとBを一致させるのに必要な最小の操作回数

$$\sum_{k=1}^{N} \mid A_k - B_k \mid = S$$

- 1回の操作で$A_i$を1増減させるとSは$\pm 1$変化する。
- 同じく$A_j$でもSの変化量は$\pm 1$
- すると、一回の操作でSは最大2減少する
- この問題ではAとBを一致させること、つまりSを0にする必要がある
- Sの変化量は最大2なので```S/2```回の操作でAとBを一致させることができる

なのでこの問題における解はこう

$$\frac{\sum_{k=1}^{N} \mid A_k - B_k \mid}{2}$$

### 最大値と最小値の差が1となる問題を考える

- Bの総和とAの総和は等しい
- Bの最大値と最小値の差は1以下である

この条件を満たすことを考えると

$$\sum_{k=1}^{N}A_k = Np + r$$

のとき

$$\sum_{k=1}^{N}B_k = p(N - r) + r(p + 1)$$

つまり、BはpがN個とp+1がN-r個の配列になる。

### 帰着される答え

最終的に

$$\sum_{k=1}^{N} \mid A_k - B_k \mid$$

が最小となるものを考える。これを最小にするにはAの小さい要素とBの小さい要素が、Aの大きい要素がBの大きい要素に対応するようにする必要があるためAの配列を昇順でソートする必要がる。ソート処理が抜けると解答は通らなくなる。

このアルゴリズムの計算量はソートの計算量がボトルネックになるのでO(N)となる。ソートの仕方によってはO(NlogN)でもいける。